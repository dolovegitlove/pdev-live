# PDev-Live Partner Configuration Template
# Copy this file to .env and customize for your deployment

# ========================================
# PARTNER IDENTITY
# ========================================
PARTNER_DOMAIN=example.com
PARTNER_NAME="Your Company Name"
PARTNER_SERVER_NAME=prod-server
PARTNER_TIMEZONE=America/New_York

# ========================================
# API CONFIGURATION
# ========================================
PDEV_LIVE_URL=https://${PARTNER_DOMAIN}/pdev/api
PDEV_BASE_URL=https://${PARTNER_DOMAIN}/pdev
PDEV_API_PORT=3077
PDEV_API_HOST=0.0.0.0

# ========================================
# SERVER INVENTORY
# ========================================
# Comma-separated list of server names in your infrastructure
VALID_SERVERS=prod-server,dev-server,staging-server

# Server IP addresses (comma-separated, for API whitelist)
ALLOWED_IPS=127.0.0.1,::1,YOUR_SERVER_IP_HERE

# ========================================
# DATABASE CONFIGURATION
# ========================================
DB_HOST=localhost
DB_PORT=5432
DB_NAME=pdev_live
DB_USER=pdev_user
DB_PASSWORD=CHANGE_ME_SECURE_PASSWORD

# ========================================
# DEPLOYMENT PATHS
# ========================================
# SSH user for deployment
DEPLOY_USER=deploy

# Frontend deployment directory
FRONTEND_DEPLOY_PATH=/var/www/${PARTNER_DOMAIN}/pdev
FRONTEND_BACKUP_PATH=/var/www/${PARTNER_DOMAIN}/pdev-backups

# Backend service directory
BACKEND_SERVICE_PATH=/opt/services/pdev-live

# Log directory
LOG_PATH=${BACKEND_SERVICE_PATH}/logs

# ========================================
# SSL/TLS CONFIGURATION
# ========================================
SSL_CERT_PATH=/etc/letsencrypt/live/${PARTNER_DOMAIN}/fullchain.pem
SSL_KEY_PATH=/etc/letsencrypt/live/${PARTNER_DOMAIN}/privkey.pem

# ========================================
# AUTHENTICATION
# ========================================
# HTTP Basic Auth for web interface
PDEV_AUTH_USER=pdev
PDEV_AUTH_PASSWORD=CHANGE_ME_SECURE_PASSWORD

# Session secret (generate with: openssl rand -base64 32)
SESSION_SECRET=CHANGE_ME_RANDOM_STRING

# ========================================
# DESKTOP CLIENT
# ========================================
# Used by Electron desktop app for auto-updates
DESKTOP_HOMEPAGE=https://${PARTNER_DOMAIN}/pdev/live/
DESKTOP_UPDATE_URL=https://${PARTNER_DOMAIN}/pdev/releases/

# ========================================
# FEATURE FLAGS
# ========================================
ENABLE_AUTO_UPDATES=true
ENABLE_TELEMETRY=false
ENABLE_DEBUG_MODE=false

# ========================================
# BACKUP RETENTION
# ========================================
BACKUP_KEEP_DAYS=30
BACKUP_MAX_COUNT=10

# ========================================
# PM2 CONFIGURATION
# ========================================
PM2_APP_NAME=pdev-live
PM2_INSTANCES=1
PM2_MAX_MEMORY_RESTART=512M
